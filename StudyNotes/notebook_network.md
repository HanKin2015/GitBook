# 笔记本网络出现严重故障

## 1、背景
在切换hosts文件后，使用ipconfig /flushdns命令时出现卡在windows IP 配置，没有成功刷新DNS缓存。

如果这时候去删除hosts文件，会报DNS Client占用错误。


然后百度发现win10有自带的网络重置功能，就重置了，5分钟后自动注销。

悲剧就发生了。。。。。

此时我在武汉锦江之星酒店


笔记本开机成功后，无线功能没有了，适配器WLAN那里有个大大的红叉，网络诊断无效

接着拿出酒店的网线插上去，然而无果，一度怀疑网线孔有问题，差点打电话了。但是一想我是一个程序员啊，这点事搞不定？？？

## 2、无线网络WLAN有个红叉
选择“服务”请确定如下五个服务状态全部为“已启动”：

Network Connections

Network List Service

Network Location Awareness

Network Store Interface Service

WLAN AutoConfig

只要选中该服务，右键，启动就可以了。

发现只有WLAN AutoConfig服务没有启动，点击启动报错：依赖服务或组服务无法启动

## 3、依赖服务或组服务无法启动

百度说把前面的网络服务启动一下，发现重启跟网络相关的服务都报错：服务无法在此时接受控制信息

## 4、服务无法在此时接受控制信息

管理员运行cmd：netsh winsock reset

搞定。但是不清楚是不是这个搞定的，因为此时我也在使用驱动精灵在修复，原来驱动精灵本身带有修复功能。

此时搞定了有线，无线还是原状。

## 5、启动WLAN服务

启动WLAN AutoConfig服务后，一切恢复如初。

## 6、有线网络无效

启动DHCP CLIENT服务后，自动分配ip无效

出现169.254网络头部，这是无效的。一般来说是192.168开头

发现DHCP CLIENT服务是正常启动的，还是前面的原因导致。

## 7、每次重启电脑都会出现网络问题

奇怪的是微信能正常登录，浏览器无法正常打开网页。

严重怀疑是hosts文件的锅。

使用驱动精灵自动修复网络功能挺好的。

## 8、最终找到罪魁祸首
最后发现是hosts文件有问题，所有的地址居然都是0.。。。。。。。

地址：host1啥的，已删除。
























