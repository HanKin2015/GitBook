# 学习usb相关知识

## 1、札记
札记，汉语词语，拼音是zhá jì，指读书时摘记的要点和心得体会。

compound: 复合
composite: 组合
hcd: Host Controller Driver
ehci: EHCI（Enhanced Host Controller Interface）增强型主机控制器接口规范描述了一个通用串行总线（USB）2.0版的主机控制器的寄存器级接口。
itd: iso transfer data

async: 异步
sync: 同步

https://www.usb.org/

几个常用的寄存器
sp/esp/rsp（16bit/32bit/64bit）栈寄存器---指向栈顶
bp/ebp/rbp 栈基址寄存器---指向栈底
ip/eip/rip 程序指令寄存器---指向下一条待执行指令

## 2、usb协议学习
《圈圈教你USB》
《cypress_USB2.0简介》

## 3、ACPI
ACPI表示高级配置和电源管理接口（Advanced Configuration and Power Management Interface）。对于Windows2000，ACPI定义了Windows 2000、BIOS和系统硬件之间的新型工作接口。这些新接口包括允许Windows 2000控制电源管理和设备配置的机制。

## 4、PCI（定义局部总线的标准）
PCI(Peripheral Component Interconnect)是 一种由英特尔（Intel）公司1991年推出的用于定义局部总线的标准。此标准允许在计算机内安装多达10个遵从PCI标准的扩展卡。
PCI总线取代了早先的ISA总线。当然与在PCI总线后面出现专门用于显卡的AGP总线，与现在PCI Express总线相比，速度要慢，但是PCI能从1992用到现在，说明他有许多优点，比如即插即用(Plug and Play)、中断共享等。

Peripheral：次要的，外围的，周边设备
Interconnect：相互连接

## 5、ATA 
高技术配置（英语：Advanced Technology Attachment，简称“ATA”）与由集成驱动电子设备（英语：Integrated Drive Electronics，简称IDE）技术实现的磁盘驱动器关系最密切。

硬盘技术、全球硬盘标准

## 6、DPI （每英寸点数）
图像每英寸长度内的像素点数。
DPI（Dots Per Inch，每英寸点数）是一个量度单位，用于点阵数码影像，指每一英寸长度中，取样、可显示或输出点的数目。
DPI是打印机、鼠标等设备分辨率的度量单位。是衡量打印机打印精度的主要参数之一，一般来说，DPI值越高，表明打印机的打印精度越高。
DPI是指每英寸的像素，也就是扫描精度。DPI越低，扫描的清晰度越低，由于受网络传输速度的影响，web上使用的图片都是72dpi，但是冲洗照片不能使用这个参数，必须是300dpi或者更高350dpi。例如要冲洗4*6英寸的照片，扫描精度必须是300dpi，那么文件尺寸应该是(4*300)*(6*300)=1200像素*1800像素。

## 7、ISO传输方式
USB支持两种类型的数据传输：大数据块(bulk)传输方式，对不能容差的数据进行移动;同步(isochronous，ISO)传输方式，对不允许时延的数据进行移动。数据块传输可确保数据能可靠传输，不会丢失或干扰数据，但不能确保给定时间内的数据传输量。在没有其他数据流量时，块数据即指那些仅使用总线的填充数据。同步传输是以主机PC与设备相互协调确定的速率来进行的，但数据可能会受到干扰，而且不能持续传输。

选择同步传输还是选择块数据传输是非常简单的。如果数据的完整性是最重要的，就采用块数据传输;但如果准时传输数据比准确率更重要的话，还是选择ISO传输。虽然乍看起来选择ISO并不合乎逻辑，因为ISO是用准时发送的受干扰数据来代替晚发的正确数据，但在某些不能及时传送数据的区域可能会存在数据根本不能到达的情况。电话里的音频流就是一个简单例子，丢失了几小片数据总比让受话方一直落后乃至不能赶上要好。在视频中也是如此，用户还是宁愿选择丢失一个帧以保持图像的实时传输。

USB带宽被分为每秒1000帧。

Windows支持的USB基于分层结构，可使所需的常规设备驱动降至最少，甚至无需常规设备驱动。分层结构的最底层是USBD，即通用串行总线驱动。位于USBD之上的是类驱动(class drivers)，这种驱动对于具有类似特性的设备是通用的。要支持ISO，类驱动必须采用流类驱动程序(Stream Class Driver，stream.sys)。音频和视频驱动则位于stream.sys之上。

## 8、USB人体学输入设备 
人体工程学又叫人类工学或人类工程学，是第二次世界大战后发展起来的一门新学科。它以人－机关系为研究的对象。

## 9、Hi-Fi
Hi-Fi是英语High-Fidelity的缩写，翻译为“高保真”，其定义是：与原来的声音高度相似的重放声音。
评价一个音响系统或设备是否符合高保真要求，一般应采用主观听音评价和客观指标测试相结合的方式来进行，并以客观测试指标为主要依据。因为采用仪器测试设备的性能指标，能得到很直观的可供参考比较的定量结果，无疑是最科学而值得信赖的。

## 10、什么是OTG？
OTG是USB On-The-Go的缩写，是近年发展起来的技术，2001年12月18日由USB Implementers Forum公布，2014年左右在市场普及。主要应用于各种不同的设备或移动设备间的联接，进行数据交换。特别是PDA、移动电话、消费类设备。平时我们在遇到没有电脑设备的情况下，可以直接将手机等移动设备连接连接U盘、读卡器、数码相机等外部设备，来进行数据传输或充电等操作。

## 11、uvc 
UVC全称为USB Video Class，即：USB视频类，是一种为USB视频捕获设备定义的协议标准。是Microsoft与另外几家设备厂商联合推出的为USB视频捕获设备定义的协议标准，已成为USB org标准之一。
如今的主流操作系统(如Windows XP SP2 and later, Linux 2.4.6 and later, MacOS 10.5 and later)都已提供UVC设备驱动，因此符合UVC规格的硬件设备在不需要安装任何的驱动程序下即可在主机中正常使用。使用UVC技术的包括摄像头、数码相机、类比影像转换器、电视棒及静态影像相机等设备。

## 12、0org（organizations）
org有组织、团体的意思。ORG，在汇编语言中也是一条指令，其作用是告诉汇编程序，在开始执行的时候，将某段机器语言装载到内存中的哪个地址。

分辨率，指的是图像或者显示屏在长和宽上各拥有的像素个数。比如一张照片分辨率为1920x1080，意思是这张照片是由横向1920个像素点和纵向1080个像素点构成，一共包含了1920x1080个像素点。

## 13、分辨率和DPI
dpi是分辨率的表示单位之一。它是英文Dot Per Inch的缩写，意思是“每英寸的点数”。上文中我们说的1920x1080或者800x600，是没加度量单位的简写，如果写全度量单位，完整的分辨率写法应该是1920x1080dpi或者800x600dpi。

分辨率确实跟屏幕dpi有关系，但这个dpi跟屏幕大小直接影响到显示效果，比如说6寸的1080p绝对没有4寸的1080p好，同样分辨率，大了就降低了dpi。但这只是在同一种材质的屏幕上，换到电脑显示器，哪就不一样了，这个分辨率就跟dpi没有多大关系了，这个只是单纯的指可支持的图片事情分辨率大小了，分辨率可以调的。
描述分辨率的单位有：（dpi点每英寸）、lpi（线每英寸）和ppi（像素每英寸）。但只有lpi是描述光学分辨率的尺度的。虽然dpi和ppi也属于分辨率范畴内的单位，但是他们的含义与lpi不同。而且lpi与dpi无法换算，只能凭经验估算。

另外，ppi和dpi经常都会出现混用现象。但是他们所用的领域也存在区别。从技术角度说，“像素”只存在于电脑显示领域，而“点”只出现于打印或印刷领域。

分辨率和DPI之间的关系，可以通过以下举例来理解：一台显示器，屏幕大小是固定的，但是屏幕分辨率是可以调整的，调小分辨率的时候DPI增大，直观视觉上就是图片和字体都放大了，而当分辨率调大时，字体和图像都会看着变小。但是只要尺寸固定，已有DPI固定，那么最高分辨率就固定了。

MIDI(Musical Instrument Digital Interface)乐器数字接口
声卡 (Sound Card)也叫音频卡（港台称之为声效卡），是计算机多媒体系统中最基本的组成部分，是实现声波/数字信号相互转换的一种硬件。声卡的基本功能是把来自话筒、磁带、光盘的原始声音信号加以转换，输出到耳机、扬声器、扩音机、录音机等声响设备，或通过音乐设备数字接口(MIDI)发出合成乐器的声音。
调制解调器（英文名Modem），俗称“猫”，是一种计算机硬件。
它能把计算机的数字信号翻译成可沿普通电话线传送的脉冲信号，而这些脉冲信号又可被线路另一端的另一个调制解调器接收，并译成计算机可懂的语言。
计算机内的信息是由“0”和“1”组成数字信号，而在电话线上传递的却只能是模拟电信号。于是，当两台计算机要通过电话线进行数据传输时，就需要一个设备负责数模的转换。

## 14、CONSOLE接口
Console接口是典型的配置接口。使用Console线直接连接至计算机的串口，利用终端仿真程序（一般使用Windows自带的“超级终端”）在本地配置路由器。 路由器的Console接口多为RJ-45接口，并标记有CONSOLE字样。

网络工程师的标准打扮是穿立领的格子衫和泛白的牛仔裤，脚踏登山鞋，背着吃饭的家伙—电脑包。一整套的商务休闲风，既可以见客户做交流、讲PPT，也可以去机房扛设备、做网线。电脑包里面必备ThinkPad笔记本电脑、网线、Console线，称职的网络工程师还会带上水晶头、网线钳和测线仪。

Console接口是典型的配置接口，然后使用Console线直接连接至笔记本电脑的USB口或蓝牙，再利用终端仿真程序在本地配置网络设备。

网络设备的Console接口一般有两种：一种是常见的RJ-45接口，一种是Mini-usb接口。

RJ-45接口可以使用三种方式连接：
1、USB转串口线 + 串口转RJ-45调试线：需要安装串口线驱动，才可以使用。
2、无线蓝牙转串口线 + 串口转RJ-45调试线：笔记本连上无线蓝牙即可使用。
3、USB转RJ-45调试线：需要安装官网驱动，才可以使用。
Mini-usb接口可以使用Mini-usb to USB线进行连接，安装官网驱动即可使用。

## 15、中断请求
同义词 IRQ一般指中断请求
“紧急事件”须向处理器提出申请（发一个电脉冲信号），要求“中断”，即要求处理器先停下“自己手头的工作”先去处理“我的急件”，这一“申请”过程，称——中断请求。

IRQ为 Interrupt ReQuest的缩写，中文可译为中断请求。因为计算机中每个组成组件都会拥有一个独立的IRQ，除了使用PCI总线的PCI卡之外，每一组件都会单独占用一个 IRQ，且不能重复使用。
由于在计算机运行中，CPU是持续处于忙碌状态，而当硬件接口设备开始或结束收发信息，需要CPU处理信息运算时，便会透过IRQ对CPU送出中断请求讯号，让CPU储存正在进行的工作，然后暂停手边的工作，先行处理周边硬件提出的需求，这便是中断请求的作用。

## 16、分辨率1080HFD是什么意思
HFD ，是“高清屏”的英文缩写， 意思是支持1920X1080以上分辨率的显示屏。
和1080p类似，就是全高清，FHD意思是全高清，即FULL HD，全称为Full High Definition。

USB设备文件对应路径为：“/dev/bus/usb/xxx/xxx”，使用了udev文件系统。
可以使用 cat /sys/bus/usb/devices/2-2.1/speed 来获取usb速度。
由于目录/sys/bus/usb/devices/经常被使用，在libusb源码中有以下宏定义：
```
#define SYSFS_DEVICE_PATH "/sys/bus/usb/devices"
```

dmidecode -t 1输出硬件设备序列号

https://zhuanlan.zhihu.com/p/37664732

BIOS EHCI Hand-Off Hand-Off是接手的意思，是否让BIOS接管EHCI控制。当操作系统不支持EHCI时，就要让BIOS来控制。EHCI是USB HiSpeed控制器的一种实现规范。

BIOS是英文"Basic Input Output System"的缩略词，直译过来后中文名称就是"基本输入输出系统"。在IBM PC兼容系统上，是一种业界标准的固件接口。计算机在运行时，首先会进入BIOS，它在计算机系统中起着非常重要的作用。

## 17、1PS2键盘/鼠标
也是键盘和鼠标，但是接bai口不一du样，我们现在一般用的是USB接口zhi的。但是最早用的就是PS2接口。
两种接口各dao有优缺点。
PS2接口，不支持热插拔，接口使用不便（不懂得人可能插都插不进去，有方向的。），但是他的不冲突性能非常好（全键无冲突），所以现在一些高速要求的键盘设备或者游戏玩家还会用PS2 接口的键盘。
USB接口就不用多讲啦，即插即用，接口使用方便。而且各类设备（笔记本，台式机，一体机）通用。

otg是英文on the go 的缩写。意思是bai能够随地播放影du音文件，不需要将文件复zhi制到播放器里边，只需要用一根连线共享另dao外的存储器即可。otg连线一般是MP4的，一般用标准usb接口，能够接到MP3MP4或者移动硬盘上，播放里边的文件。在外旅行拍摄很方便的。

## 18、透传
透传，即透明传输（pass-through），指的是在通讯中不管传输的业务内容如何，只负责将传输的内容由源地址传输到目的地址，而不对业务数据内容做任何改变

## 19、HCD
hcd是主机控制器的驱动程序。它位于USB主机控制器与USB系统软件之间。

一个USB控制器的实
现者必须提供一个支持它自己的控制器的主机控制器驱动器(HCD)实现
HCD是Hydraulic component design library的简称，即为液压元件设计库。

## 20、内存屏障
https://www.jianshu.com/p/08a0a8c984ab

## 21、MMIO
在MMIO中，内存和I/O设备共享同一个地址空间。 MMIO是应用得最为广泛的一种IO方法，它使用相同的地址总线来处理内存和I/O设备，I/O设备的内存和寄存器被映射到与之相关联的地址。当CPU访问某个内存地址时，它可能是物理内存，也可以是某个I/O设备的内存。因此，用于访问内存的CPU指令也可来访问I/O设备。每个I/O设备监视CPU的地址总线，一旦CPU访问分配给它的地址，它就做出响应，将数据总线连接到需要访问的设备硬件寄存器。为了容纳I/O设备，CPU必须预留给I/O一个地址区域，该地址区域不能给物理内存使用。

https://www.cnblogs.com/idorax/p/7691334.html

常常看见human interface device，结果才发现是HID的全拼，人机接口设备。

## 22、U盘只读相关
mount命令可以看见u盘设备当前是可读可写rw，可读不可写ro。
dmesg -w也能看见write protect is on。
银河麒麟出现界面无法写入，报错目标是只读的。但是终端和日志查看write protect is off，并且可以写入。
解决：echo $DESKTOP_SESSION获取session类型，然后ps查找相关session进程，killall杀死进程，这时候界面重启，这时候就能正常写入了。

## 23、USB类码
USB中interface代表其USB功能，这里判断设备类型就是根据interface的描述符中的bInterfaceClass，bInterfaceSubClass，bInterfaceProtocol。三个字段进行判断的。

https://www.usb.org/defined-class-codes

## 24、会谈边界控制器
会谈边界控制器（Session Border Controller, SBC），一种NAT穿透的方式。SBC可确保VoIP 安全，又可提供媒体代理服务器的套件。
SBC架构于IMS网络之上，可作为IMS网络的SIP和RTSP的 Proxy Server，所有的SIP与RTSP讯息都会透过SBC来处理，SBC更具备NAT穿透的功能。思科与 Kagoor 对会谈边界控制技术有突破性的发展。

SBC可以理解为远程应用。

## 25、oa系统办公
办公自动化(OA: OFFICE AUTOMATION)就是采用Internet/Intranet技术，基于工作流概念，使企业内部人员方便快捷地共享信息，高效协同工作；改变过去复杂、低效的手工办公方式，实现迅速、全方位的信息采集、处理，为企业管理和决策提供科学依据。企业实现办公自动化程度也是衡量其实现现代化管理的标准。办公自动化不仅兼顾个人办公效率提高，更重要的是可实现群体协同工作。凭借网络，这种交流与协调几乎可以在瞬间完成。这里所说的群体工作，可以包括在地理上分布很广，甚至在全球上各个地方，以至于工作时间都不一样的一群工作人员。

## 26、TWAIN
TWAIN（全写：Technology Without An Interesting Name）是一个软件和数码相机、扫描仪等图像输入设备之间的通讯标准。

## 27、主引导记录
主引导记录（MBR，Master Boot Record）是位于磁盘最前边的一段引导（Loader）代码。它负责磁盘操作系统(DOS)对磁盘进行读写时分区合法性的判别、分区引导信息的定位，它由磁盘操作系统(DOS)在对硬盘进行初始化时产生的。

SCSI：是小型计算机系统接口的意思，就是早期硬盘或者光驱的接口类型，多用在服务器电脑上。数据线有50芯或者68芯的
SATA：是现在的硬盘或者光驱接口，是串行接口。现在的电脑一般都用这种类型，数据线是7芯的。

仅批量传输协议中，数据传输的结构和过程：命令阶段、数据阶段和状态阶段。
命令块封包CBW：Command Block Wrapper
命令状态封包CSW：Command Status Wrapper
CDB：Command Block？？？
SE(System Engineer)

## 28、什么是Quickstart?
Quickstart，97年开发，首次被引入Pentium III处理器，它主要是通过监测CPU的工作负荷，当CPU处于空闲状态时，就把CPU置于休眠状态，到需要时再迅速恢复工作状态。处于休眠状态的CPU功耗，甚至能低到0.5W，以达到有效管理电源以获得更长的。

Serial ATA (SATA) or Parallel
串行

vertical垂直的

## 29、字符设备
字符设备是指在I/O传输过程中以字符为单位进行传输的设备，例如键盘，打印机等。在UNIX系统中，字符设备以特别文件方式在文件目录树中占据位置并拥有相应的结点。
字符设备可以使用与普通文件相同的文件操作命令对字符设备文件进行操作，例如打开、关闭、读、写等。

## 30、块设备
块设备是i/o设备中的一类，是将信息存储在固定大小的块中，每个块都有自己的地址，还可以在设备的任意位置读取一定长度的数据，例如硬盘,U盘，SD卡等。

